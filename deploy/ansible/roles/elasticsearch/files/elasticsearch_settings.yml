---
settings:
  analysis:
    analyzer:
      nyaapantsu_search_analyzer:
        type: custom
        tokenizer: standard
        char_filter:
          - my_char_filter
        filter:
          - standard
          - lowercase
      nyaapantsu_index_analyzer:
        type: custom
        tokenizer: standard
        char_filter:
          - my_char_filter
        filter:
          - resolution
          - lowercase
          - my_ngram
          - word_delimit
    filter:
      my_ngram:
        type: edgeNGram
        min_gram: 2
        max_gram: 15
      resolution:
        type: pattern_capture
        patterns: ["(\\d+)[xX](\\d+)"]
      word_delimit:
        type: word_delimiter
        preserve_original: true
        split_on_numerics: false
    char_filter:
      my_char_filter:
        type: mapping
        mappings: ["-=>_", "!=>_", "_=>\\u0020"]

  index:
    number_of_shards: 1
    number_of_replicas: 0

mappings:
  torrents:
    properties:
      # TODO Consistent ID's type in TorrentJSON
      id:
        type: long
      name:
        type: text
        analyzer: nyaapantsu_index_analyzer
        fielddata: true # Use to sort by id because it is currently a text field
      category:
        type: text
      sub_category:
        type: text
      status:
        type: long
      hash:
        type: text
      date:
        type: date
      uploader_id:
        type: long
      downloads:
        type: long
      seeders:
        type: long
      leechers:
        type: long
      completed:
        type: long
      filesize:
        type: long
