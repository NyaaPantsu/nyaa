{* We extend the base template *}
{{ extends "partials/base" }}
{{import "partials/helpers/search"}}

{* We apply the menu in the base template *}
{{ block menu()}}
{{include "partials/menu/site"}}
{{end}}

{* We used to add the class content for admin *}
{{ block contclass()}}admin-content{{end}}

{* We add the mod panel title and the title block *}
{{block titleBase()}} Moderation Panel - {{block title()}}{{end}}
{{end}}

{* We add the mod nav and the body block *}
{{ block content_body_base()}}
{{include "partials/menu/admin"}}
{{ block content_body()}}
{{end}}
{{end}}
{{block footer_js()}}
<script type="text/javascript">
 var deleteButtons = document.getElementsByClassName("delete-btn")
 for(var i = 0; i < deleteButtons.length; i++) {
   deleteButtons[i].addEventListener("click", function (e) {
	 e.preventDefault()
     Query.Get(this.href, function(data) {})
  // Make query
  Query.Post(form.action+"&json", query, function(data) {
    if (data.ok) {
      Modal.CloseActive()
      if (data.data === null) return 
      var len = data.data.length
      for (var i = 0; i < len; i++) {
        var tagHTml = Templates.Render("tag", data.data[i])
        document.getElementById("tags-torrent").innerHTML = tagHTml + document.getElementById("tags-torrent").innerHTML
      }
    } else {
      alert("{{ T("tag_error") }}")
    }
  })
     this.parentNode.parentNode.className = this.parentNode.parentNode.className + " hidden"
     this.innerText = "Deleted"
    })
 }
</script>
{{end}}
