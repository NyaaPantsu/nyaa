{{ extends "layouts/index_site" }}
{{ import "layouts/partials/helpers/csrf" }}
{{ import "layouts/partials/helpers/captcha" }}
{{block title()}}{{ T("upload")}}{{end}}
{{block content_body()}}
<div style="text-align: left;" class="box">
	<form enctype="multipart/form-data" role="upload" method="POST">
		{{ yield csrf_field() }}
		<h3>{{ T("name")}}</h3>
		<input type="text" name="name" id="name" class="form-input up-input" placeholder="{{ T("file_name")}}" value="{{Form.Name}}" autofocus>
		{{ yield errors(name="name")}}

		<h3>{{ T("torrent_file")}}</h3>
		<input type="file" name="torrent" id="torrent" class="up-input" accept=".torrent">
		<p>{{ T("uploading_file_prefills_fields")}}</p>
		{{ yield errors(name="torrent")}}

		<h3>{{ T("magnet_link")}}</h3>
		<input type="text" name="magnet" id="magnet" class="form-input up-input" placeholder="{{ T("magnet_link")}}" value="{{Form.Magnet}}">
		<p>{{  T("please_include_our_tracker") }}</p>
		{{ yield errors(name="magnet")}}

		<h3>{{ T("category")}}</h3>
		<select name="c" id="c" class="form-input up-input" required>
			<option value="">{{ T("select_a_torrent_category")}}</option>
			{{ range name_cat, id_cat := GetCategories(false, true) }}
			<option value="{{ id_cat }}" {{if Form.Category == id_cat }}selected{{end}}>{{ T(name_cat) }}</option>
			{{ end }}
		</select>
		{{ yield errors(name="c")}}

		<h3>{{  T("torrent_language") }}</h3>
		<select name="language" id="language" class="form-input up-input">
			<option value="other" {{if Form.Language == "other"}}selected{{end}}>{{ T("select_a_torrent_language")}}</option>
			<option value="multiple" {{if Form.Language == "multiple"}}selected{{end}}>{{ T("language_multiple_name")}}</option>
			{{ range _, language := GetTorrentLanguages() }}
			<option value="{{ language }}" {{if Form.Language == language}}selected{{end}}>
				{{LanguageName(language, T)}}
			</option>
			{{ end }}
		</select>
		{{ yield errors(name="language")}}

		<p>
			<input type="checkbox" name="remake" id="remake" >
			<label for="remake">{{ T("mark_as_remake")}}</label>
		</p>
		{{ yield errors(name="remake")}}

		{{ if User.ID > 0 }}
		<p>
			<input type="checkbox" name="hidden" id="hidden" >
			<label for="hidden">{{ T("mark_as_hidden")}}</label>
		</p>
		{{ yield errors(name="hidden")}}
		{{ end }}
		<h3>{{ T("website_link")}}</h3>
		<input name="website_link" id="website_link" class="form-input up-input" type="text" value="{{Form.WebsiteLink}}">
		{{ yield errors(name="website_link")}}

		<h3>{{ T("torrent_description")}}</h3>
		<p>{{ T("description_markdown_notice")}}</p>
		<textarea name="desc" id="desc" class="form-input up-input" style="height: 10rem;">{{Form.Description}}</textarea>
		{{ yield errors(name="desc")}}
		<div style="width: 240px">
		{{yield captcha(captchaid=Form.CaptchaID)}}
		</div>
		{{ yield errors(name="captchaID")}}
		<button type="submit" class="form-input up-btn">{{ T("upload")}}</button>
	</form>
</div>
{{end}}
{{ block footer_js()}}
<script type="text/javascript" src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
<script type="text/javascript">new SimpleMDE({ element: document.getElementById("desc"), spellChecker: false, showIcons: [ "strikethrough", "code", "table", "horizontal-rule" ] });</script>
{{end}}
