{{define "title"}}{{.Torrent.Name}}{{end}}
{{define "contclass"}}cont-view {{if eq .Torrent.Status 2}}remake{{end}} {{if eq .Torrent.Status 3}}trusted{{end}} {{if eq .Torrent.Status 4}}aplus{{end}}{{end}}
{{define "content"}}
<div style="text-align: left;" class="box">
    {{with .Torrent}}
    {{ range (index $.FormErrors "errors")}}
        <div class="alert alert-danger"><a class="panel-close close" data-dismiss="alert">×</a><i class="glyphicon glyphicon-exclamation-sign"></i> {{ . }}</div>
    {{end}}
    {{ range (index $.Infos "infos")}}
        <div class="alert alert-info"><a class="panel-close close" data-dismiss="alert">×</a><i class="glyphicon glyphicon-info-sign"></i> {{ . }}</div>
    {{end}}
  <a class="torrent-hr" href="{{$.URL.Parse (printf "/search?c=%s_%s" .Category .SubCategory) }}">{{ if Sukebei}}{{ call $.T (Category_Sukebei .Category .SubCategory) }}{{else}}{{ call $.T (Category_Nyaa .Category .SubCategory) }}{{end}}</a> <br>
  <br>
  <table>
      <tr class="torrent-info-row">
      <td class="torrent-info-td torrent-info-label">Name:</td><td class="torrent-info-td torrent-info-data">{{.Name}}</td>
      <td class="torrent-info-td torrent-info-label">Date:</td><td class="torrent-info-td date-short">{{.Date}}</td>
      </tr>
      <tr class="torrent-info-row">
          <td class="torrent-info-td torrent-info-label">{{ call $.T "uploaded_by" }}:</td><td class="torrent-view-td torrent-info-data"><a href="{{ genRoute "user_profile" "id" ( print .UploaderID ) "username" (print .UploaderName) }}">{{.UploaderName}}</a></td>
          <td class="torrent-info-td torrent-info-label">{{call $.T "seeders"}}:</td><td class="torrent-info-td">{{if .LastScrape.IsZero}}{{call $.T "unknown"}}{{else}}{{.Seeders}}{{end}}</td>
      </tr>
      <tr class="torrent-info-row">
          <td class="torrent-info-td torrent-info-label">Website:</td><td class="torrent-view-td torrent-info-data">{{if ne .WebsiteLink ""}}<a href="{{.WebsiteLink}}">{{.WebsiteLink}}</a>{{else}}<a href="//nyaa.pantsu.cat">nyaa.pantsu.cat{{end}}</td>
          <td class="torrent-info-td torrent-info-label">{{call $.T "leechers"}}:</td><td class="torrent-info-td">{{if .LastScrape.IsZero}}{{call $.T "unknown"}}{{else}}{{.Leechers}}{{end}}</td>
      </tr>
    <tr class="torrent-info-row">
          <td class="torrent-info-td torrent-info-label">{{call $.T "hash"}}:</td><td style="font-family: monospace;" class="torrent-view-td torrent-info-data">{{.Hash}}</td>
          <td class="torrent-info-td torrent-info-label">{{call $.T "completed"}}:</td><td class="torrent-info-td">{{if .LastScrape.IsZero}}{{call $.T "unknown"}}{{else}}{{.Completed}}{{end}}</td>
      </tr>
    <tr class="torrent-info-row">
          <td class="torrent-info-td torrent-info-label">{{call $.T "size"}}:</td><td class="torrent-view-td torrent-info-data">{{ fileSize .Filesize $.T }}</td>
          <td class="torrent-info-td torrent-info-label">{{call $.T "last_scraped"}}</td><td class="torrent-info-td">{{if not .LastScrape.IsZero}}{{formatDateRFC .LastScrape}}{{else}}{{call $.T "unknown"}}{{end}}</td>
      </tr>
  </table>
  <p class="torrent-hr">{{call $.T "description"}}</p>
  {{ if ne .Description ""}}
  <div class="torrent-info-box">{{.Description}}</div>
  {{else}}
  <p>No description provided!</p>
  {{end}}
  <p class="torrent-hr">{{call $.T "files"}}</p>
  {{ if gt (len .FileList) 0 }}
  <div class="torrent-info-box">
      <table>
      {{range .FileList}}
      <tr class="torrent-info-row">
          <td style="width: 70%;" class="torrent-info-td">{{.Path}}</td>
          <td class="torrent-info-td">{{.Filesize}}</td>
      </tr>
      {{end}}
      </table>
  </div>
  {{else}}
  <p>No files found? That doesn't even make sense!</p>
  {{end}}
  <p class="torrent-hr">{{call $.T "comments"}}</p>
  {{range $index, $element := .Comments}}
  <div class="torrent-info-box comment-box">
 <span class="comment-index"><a href="#comment_{{inc $index}}">#{{inc $index}}</a><small style="padding-left: 4px;" class="date-short">  {{.Date}}</small></span>
  <p>{{.Username}}</p>
  <p>{{.Content}}</p>
  </div>
  {{end}}

  {{end}}
  <div style="margin-top: 10px" class="torrent-info-box">
    <form method="post">
                <div class="comment-form">
                    <div class="comment-text">
                    <label style="margin-top: 5px; margin-left: 5px;" class="input-label"  for="comment">Submit a comment!</label> <br>
                    <textarea placeholder="Senkyuu~" name="comment" class="form-input" cols="50" rows="50"></textarea>
                    </div>
                    <div class="comment-captcha">
                {{block "captcha" (makeCaptchaData .CaptchaID $.T)}}{{end}}
                <button type="submit" class="form-input">{{call $.T "submit" }}</button>
                    </div>
                </div>
  </form>
  </div>
 </div>
{{end}}